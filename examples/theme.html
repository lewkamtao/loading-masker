<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ä¸»é¢˜æ¨¡å¼ç¤ºä¾‹ - Loading Masker</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        padding: 20px;
        background: #f5f5f5;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      h1 {
        margin-bottom: 30px;
        color: #333;
      }

      .demo-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
      }

      .demo-box {
        background: white;
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      }

      .demo-box h2 {
        margin-bottom: 15px;
        font-size: 18px;
        color: #1a73e8;
      }

      .demo-content {
        min-height: 200px;
        background: #fafafa;
        border-radius: 4px;
        padding: 15px;
        position: relative;
      }

      .controls {
        display: flex;
        gap: 10px;
        margin-top: 15px;
      }

      button {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        background: #1a73e8;
        color: white;
        cursor: pointer;
        font-size: 14px;
        transition: background 0.2s;
      }

      button:hover {
        background: #1557b0;
      }

      button:active {
        transform: scale(0.98);
      }

      .info {
        background: #e3f2fd;
        border-left: 4px solid #1a73e8;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 4px;
      }

      .info h3 {
        margin-bottom: 8px;
        color: #1a73e8;
      }

      .info ul {
        margin-left: 20px;
      }

      .info li {
        margin: 5px 0;
        color: #555;
      }

      code {
        background: #f5f5f5;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Courier New', monospace;
        font-size: 13px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ¨ ä¸»é¢˜æ¨¡å¼ç¤ºä¾‹</h1>

      <div class="info">
        <h3>âœ¨ æ–°åŠŸèƒ½è¯´æ˜</h3>
        <ul>
          <li><strong>é˜²é—ªå±</strong>ï¼šæ·»åŠ äº† <code>minDuration</code> é…ç½®ï¼ˆé»˜è®¤ 300msï¼‰ï¼Œé¿å…åŠ è½½æ—¶é—´è¿‡çŸ­å¯¼è‡´é—ªå±</li>
          <li><strong>ä¸»é¢˜æ¨¡å¼</strong>ï¼šæ·»åŠ äº† <code>theme</code> é…ç½®ï¼Œå¯é€‰ <code>light</code>ï¼ˆæµ…è‰²ï¼‰æˆ– <code>dark</code>ï¼ˆæ·±è‰²ï¼‰</li>
          <li>æµ…è‰²ä¸»é¢˜ï¼šç™½è‰²åŠé€æ˜èƒŒæ™¯ + è“è‰²åŠ è½½å›¾æ ‡</li>
          <li>æ·±è‰²ä¸»é¢˜ï¼šé»‘è‰²åŠé€æ˜èƒŒæ™¯ + æµ…è“è‰²åŠ è½½å›¾æ ‡</li>
        </ul>
      </div>

      <div class="demo-grid">
        <!-- æµ…è‰²ä¸»é¢˜ -->
        <div class="demo-box">
          <h2>â˜€ï¸ æµ…è‰²ä¸»é¢˜ï¼ˆLightï¼‰</h2>
          <div class="demo-content" id="demo-light">
            <p>è¿™æ˜¯æ¼”ç¤ºå†…å®¹åŒºåŸŸ</p>
          </div>
          <div class="controls">
            <button onclick="testLight('fast')">å¿«é€ŸåŠ è½½ï¼ˆ100msï¼‰</button>
            <button onclick="testLight('normal')">æ­£å¸¸åŠ è½½ï¼ˆ1ç§’ï¼‰</button>
            <button onclick="testLight('slow')">æ…¢é€ŸåŠ è½½ï¼ˆ3ç§’ï¼‰</button>
          </div>
        </div>

        <!-- æ·±è‰²ä¸»é¢˜ -->
        <div class="demo-box">
          <h2>ğŸŒ™ æ·±è‰²ä¸»é¢˜ï¼ˆDarkï¼‰</h2>
          <div class="demo-content" id="demo-dark">
            <p>è¿™æ˜¯æ¼”ç¤ºå†…å®¹åŒºåŸŸ</p>
          </div>
          <div class="controls">
            <button onclick="testDark('fast')">å¿«é€ŸåŠ è½½ï¼ˆ100msï¼‰</button>
            <button onclick="testDark('normal')">æ­£å¸¸åŠ è½½ï¼ˆ1ç§’ï¼‰</button>
            <button onclick="testDark('slow')">æ…¢é€ŸåŠ è½½ï¼ˆ3ç§’ï¼‰</button>
          </div>
        </div>
      </div>

      <div class="info" style="background: #fff3e0; border-left-color: #ff9800;">
        <h3>ğŸ” æµ‹è¯•è¯´æ˜</h3>
        <ul>
          <li><strong>å¿«é€ŸåŠ è½½ï¼ˆ100msï¼‰</strong>ï¼šç”±äºè®¾ç½®äº†æœ€å°æ˜¾ç¤ºæ—¶é•¿ 300msï¼Œå®é™…ä¼šæ˜¾ç¤º 300msï¼Œé¿å…é—ªå±</li>
          <li><strong>æ­£å¸¸åŠ è½½ï¼ˆ1ç§’ï¼‰</strong>ï¼šæ­£å¸¸æ˜¾ç¤ºå®Œæ•´çš„ 1 ç§’</li>
          <li><strong>æ…¢é€ŸåŠ è½½ï¼ˆ3ç§’ï¼‰</strong>ï¼šæ˜¾ç¤º 3 ç§’é’Ÿçš„åŠ è½½çŠ¶æ€</li>
        </ul>
      </div>
    </div>

    <script type="module">
      import { createMasker } from '../src/index.ts'

      // æµ…è‰²ä¸»é¢˜å®ä¾‹
      const maskerLight = createMasker({
        node: document.getElementById('demo-light'),
        theme: 'light',
        minDuration: 300, // æœ€å°æ˜¾ç¤º 300msï¼Œé˜²æ­¢é—ªå±
        observe: false,
      })

      // æ·±è‰²ä¸»é¢˜å®ä¾‹
      const maskerDark = createMasker({
        node: document.getElementById('demo-dark'),
        theme: 'dark',
        minDuration: 300, // æœ€å°æ˜¾ç¤º 300msï¼Œé˜²æ­¢é—ªå±
        observe: false,
      })

      // æ¨¡æ‹Ÿå¼‚æ­¥åŠ è½½
      function simulateLoading(duration) {
        return new Promise(resolve => setTimeout(resolve, duration))
      }

      // æµ‹è¯•æµ…è‰²ä¸»é¢˜
      window.testLight = async function (speed) {
        const durations = { fast: 100, normal: 1000, slow: 3000 }
        const duration = durations[speed]

        maskerLight.show()
        console.log(`[Light] å¼€å§‹åŠ è½½ï¼Œé¢„è®¡ ${duration}ms`)

        const startTime = Date.now()
        await simulateLoading(duration)
        
        maskerLight.hide()
        const actualTime = Date.now() - startTime
        console.log(`[Light] åŠ è½½å®Œæˆï¼Œå®é™…æ˜¾ç¤ºæ—¶é•¿: ${actualTime}ms`)
      }

      // æµ‹è¯•æ·±è‰²ä¸»é¢˜
      window.testDark = async function (speed) {
        const durations = { fast: 100, normal: 1000, slow: 3000 }
        const duration = durations[speed]

        maskerDark.show()
        console.log(`[Dark] å¼€å§‹åŠ è½½ï¼Œé¢„è®¡ ${duration}ms`)

        const startTime = Date.now()
        await simulateLoading(duration)
        
        maskerDark.hide()
        const actualTime = Date.now() - startTime
        console.log(`[Dark] åŠ è½½å®Œæˆï¼Œå®é™…æ˜¾ç¤ºæ—¶é•¿: ${actualTime}ms`)
      }
    </script>
  </body>
</html>

